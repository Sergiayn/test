<html>
  <body>
    
    hello world
    <div id="container"></div>
    
    <script async
            src="https://pay.google.com/gp/p/js/pay.js"
            onload="start_tranzzo()">
    </script>
    
    
    <script>
      function start_tranzzo(){
        //1
        const baseRequest = {
          apiVersion: 2,
          apiVersionMinor: 0
        };
        
        //2
        const posId = 'b06b1ccd-2eab-4e82-a17b-cf4fa3439741'
        const tokenizationSpecification = {
              type: 'PAYMENT_GATEWAY',
              parameters: {
                'gateway': 'tranzzo',
                'gatewayMerchantId': posId
              }
        };
        
        //3
        const allowedCardNetworks = ["AMEX", "DISCOVER", "INTERAC", "JCB", "MASTERCARD", "VISA"];
        const allowedCardAuthMethods = ["PAN_ONLY", "CRYPTOGRAM_3DS"];
        
        //4
        const baseCardPaymentMethod = {
          type: 'CARD',
          parameters: {
            allowedAuthMethods: allowedCardAuthMethods,
            allowedCardNetworks: allowedCardNetworks
          }
        };
        const cardPaymentMethod = Object.assign(
          {tokenizationSpecification: tokenizationSpecification},
          baseCardPaymentMethod
        );
        
        
        const paymentsClient = new google.payments.api.PaymentsClient({environment: 'TEST'});
        
        paymentsClient.isReadyToPay(isReadyToPayRequest)
        .then(function(response) {
          if (response.result) {
            const button = paymentsClient.createButton({onClick: () => console.log('TODO: click handler')});
            document.getElementById('container').appendChild(button);
          }
        })
        .catch(function(err) {
          // show error in developer console for debugging
          console.error(err);
        });

  
      }
    </script>
    

    
    
  </body>
</html>
